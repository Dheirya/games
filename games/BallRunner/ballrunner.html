<!doctypehtml><html><head><title>Ball Runner</title><style>body,html{margin:0;height:100%;overflow:hidden}@font-face{font-family:Quicksand;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v24/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkP8o58a-xDwxUD2GFw.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body,html{font-family:Quicksand}</style></head><body><div id=TutContainer></div><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/sweetalert2@11></script><script type=module>import*as THREE from"https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.module.js";import{OrbitControls}from"https://cdn.skypack.dev/three@latest/examples/jsm/controls/OrbitControls.js";var sceneWidth,sceneHeight,camera,scene,renderer,dom,sun,ground,orbitControl,rollingGroundSphere,heroSphere,heroRollingSpeed,sphericalHelper,pathAngleValues,currentLane,clock,jumping,treesInPath,treesPool,particleGeometry,particles,scoreText,score,hasCollided,rollingSpeed=.008,worldRadius=26,heroRadius=.2,heroBaseY=1.8,bounceValue=.1,gravity=.005,leftLane=-1,rightLane=1,middleLane=0,treeReleaseInterval=.5,lastTreeReleaseTime=0,particleCount=20,explosionPower=1.06;function init(){createScene(),update()}function createScene(){hasCollided=!1,score=0,treesInPath=[],treesPool=[],(clock=new THREE.Clock).start(),heroRollingSpeed=rollingSpeed*worldRadius/heroRadius/5,sphericalHelper=new THREE.Spherical,pathAngleValues=[1.52,1.57,1.62],sceneWidth=window.innerWidth,sceneHeight=window.innerHeight,(scene=new THREE.Scene).fog=new THREE.FogExp2(15794160,.14),camera=new THREE.PerspectiveCamera(60,sceneWidth/sceneHeight,.1,1e3),(renderer=new THREE.WebGLRenderer({alpha:!0})).setClearColor(16775930,1),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.setSize(sceneWidth,sceneHeight),(dom=document.getElementById("TutContainer")).appendChild(renderer.domElement),createTreesPool(),addWorld(),addHero(),addLight(),addExplosion(),camera.position.z=6.5,camera.position.y=3.5,(orbitControl=new OrbitControls(camera,renderer.domElement)).addEventListener("change",render),orbitControl.noKeys=!0,orbitControl.noPan=!0,orbitControl.autoRotate=!0,orbitControl.enableZoom=!1,orbitControl.minPolarAngle=1.1,orbitControl.maxPolarAngle=1.1,orbitControl.minAzimuthAngle=-.2,orbitControl.maxAzimuthAngle=.2,window.addEventListener("resize",onWindowResize,!1),(scoreText=document.createElement("div")).style.position="absolute",scoreText.style.width=300,scoreText.style.height=100,scoreText.style.color="#ffe080",scoreText.style.fontSize="5em",scoreText.style.fontWeight="bold",scoreText.innerHTML="0",scoreText.style.top="0px",scoreText.style.left="20px",document.body.appendChild(scoreText)}function addExplosion(){particleGeometry=new THREE.Geometry;for(var e=0;e<particleCount;e++){var r=new THREE.Vector3;particleGeometry.vertices.push(r)}var o=new THREE.ParticleBasicMaterial({color:16775930,size:.2});particles=new THREE.Points(particleGeometry,o),scene.add(particles),particles.visible=!1}function createTreesPool(){for(var e,r=0;r<10;r++)e=createTree(),treesPool.push(e)}init();var map={37:!1,39:!1,38:!1};function addHero(){var e=new THREE.DodecahedronGeometry(heroRadius,1),r=new THREE.MeshStandardMaterial({color:11237698,shading:THREE.FlatShading});jumping=!1,(heroSphere=new THREE.Mesh(e,r)).receiveShadow=!0,heroSphere.castShadow=!0,scene.add(heroSphere),heroSphere.position.y=heroBaseY,heroSphere.position.z=4.8,currentLane=middleLane,heroSphere.position.x=currentLane}function addWorld(){for(var e,r,o=new THREE.SphereGeometry(worldRadius,50,50),n=new THREE.MeshStandardMaterial({color:7846720,shading:THREE.FlatShading,roughness:1}),t=new THREE.Vector3,a=new THREE.Vector3,i=new THREE.Vector3,l=new THREE.Vector3,s=1,d=.5,c=1;c<48;c++){s=c;for(var h=0;h<50;h++)e=50*s+1,t=o.vertices[h+e].clone(),c%2!=0&&(0==h&&(i=t.clone()),a=o.vertices[h+e+1].clone(),49==h&&(a=i),d=.5*Math.random()+.25,t.lerp(a,d)),r=.07*Math.random()-.035,l=t.clone().normalize().multiplyScalar(r),o.vertices[h+e]=t.add(l)}(rollingGroundSphere=new THREE.Mesh(o,n)).receiveShadow=!0,rollingGroundSphere.castShadow=!1,rollingGroundSphere.rotation.z=-Math.PI/2,scene.add(rollingGroundSphere),rollingGroundSphere.position.y=-24,rollingGroundSphere.position.z=2,addWorldTrees()}function addLight(){var e=new THREE.HemisphereLight(16777147,526368,.9);scene.add(e),(sun=new THREE.DirectionalLight(13484485,.9)).position.set(12,6,-7),sun.castShadow=!0,scene.add(sun),sun.shadow.mapSize.width=256,sun.shadow.mapSize.height=256,sun.shadow.camera.near=.5,sun.shadow.camera.far=5}function addPathTree(){var e=[0,1,2],r=Math.floor(3*Math.random());addTree(!0,r),e.splice(r,1),Math.random()>.5&&addTree(!0,e[r=Math.floor(2*Math.random())])}function addWorldTrees(){for(var e=0;e<36;e++)addTree(!1,e*(6.28/36),!0),addTree(!1,e*(6.28/36),!1)}function addTree(e,r,o){var n;if(e){if(0==treesPool.length)return;(n=treesPool.pop()).visible=!0,treesInPath.push(n),sphericalHelper.set(worldRadius-.3,pathAngleValues[r],4-rollingGroundSphere.rotation.x)}else{n=createTree();var t=[1.52,1.57,1.62];t=o?1.68+.1*Math.random():1.46-.1*Math.random(),sphericalHelper.set(worldRadius-.3,t,r)}n.position.setFromSpherical(sphericalHelper);var a=rollingGroundSphere.position.clone().normalize(),i=n.position.clone().normalize();n.quaternion.setFromUnitVectors(i,a),n.rotation.x+=Math.random()*(2*Math.PI/10)+-Math.PI/10,rollingGroundSphere.add(n)}function createTree(){var e=.15*Math.random()+.05,r=(new THREE.Vector3,new THREE.Vector3,new THREE.ConeGeometry(.5,1,8,6)),o=new THREE.MeshStandardMaterial({color:3407667,shading:THREE.FlatShading});r.vertices[0].clone();blowUpTree(r.vertices,8,0,e),tightenTree(r.vertices,8,1),blowUpTree(r.vertices,8,2,1.1*e,!0),tightenTree(r.vertices,8,3),blowUpTree(r.vertices,8,4,1.2*e),tightenTree(r.vertices,8,5);var n=new THREE.Mesh(r,o);n.castShadow=!0,n.receiveShadow=!1,n.position.y=.9,n.rotation.y=Math.random()*Math.PI;var t=new THREE.CylinderGeometry(.1,.1,.5),a=new THREE.MeshStandardMaterial({color:8939059,shading:THREE.FlatShading}),i=new THREE.Mesh(t,a);i.position.y=.25;var l=new THREE.Object3D;return l.add(i),l.add(n),l}function blowUpTree(e,r,o,n,t){for(var a,i,l=new THREE.Vector3,s=e[0].clone(),d=0;d<r;d++)l=e[d+(a=o*r+1)].clone(),s.y=l.y,i=l.sub(s),t?d%2==0?(i.normalize().multiplyScalar(n/6),e[d+a].add(i)):(i.normalize().multiplyScalar(n),e[d+a].add(i),e[d+a].y=e[d+a+r].y+.05):d%2!=0?(i.normalize().multiplyScalar(n/6),e[d+a].add(i)):(i.normalize().multiplyScalar(n),e[d+a].add(i),e[d+a].y=e[d+a+r].y+.05)}function tightenTree(e,r,o){for(var n,t,a=new THREE.Vector3,i=e[0].clone(),l=0;l<r;l++)a=e[l+(n=o*r+1)].clone(),i.y=a.y,(t=a.sub(i)).normalize().multiplyScalar(.06),e[l+n].sub(t)}function update(){rollingSpeed+=1e-6,treeReleaseInterval-=1e-5,rollingGroundSphere.rotation.x+=rollingSpeed,heroSphere.rotation.x-=heroRollingSpeed,heroSphere.position.y<=heroBaseY&&(jumping=!1,bounceValue=.04*Math.random()+.005),heroSphere.position.y+=bounceValue,heroSphere.position.x=THREE.Math.lerp(heroSphere.position.x,currentLane,2*clock.getDelta()),bounceValue-=gravity,clock.getElapsedTime()>treeReleaseInterval&&(clock.start(),addPathTree(),hasCollided||(score+=2*treeReleaseInterval,score=Math.round(score),scoreText.innerHTML=score.toString())),doTreeLogic(),doExplosionLogic(),render(),hasCollided?Swal.fire({title:"You Lost",icon:"error",showDenyButton:!1,showCancelButton:!1,confirmButtonText:"Try Again"}).then(e=>{e.isConfirmed&&location.reload()}):requestAnimationFrame(update)}function doTreeLogic(){var e,r,o=new THREE.Vector3,n=[];treesInPath.forEach(function(r,t){e=treesInPath[t],o.setFromMatrixPosition(e.matrixWorld),o.z>6&&e.visible?n.push(e):o.distanceTo(heroSphere.position)<=.6&&(explode(),hasCollided=!0)}),n.forEach(function(o,t){e=n[t],r=treesInPath.indexOf(e),treesInPath.splice(r,1),treesPool.push(e),e.visible=!1})}function doExplosionLogic(){if(particles.visible){for(var e=0;e<particleCount;e++)particleGeometry.vertices[e].multiplyScalar(explosionPower);explosionPower>1.005?explosionPower-=.001:particles.visible=!1,particleGeometry.verticesNeedUpdate=!0}}function explode(){particles.position.y=2,particles.position.z=4.8,particles.position.x=heroSphere.position.x;for(var e=0;e<particleCount;e++){var r=new THREE.Vector3;r.x=.4*Math.random()-.2,r.y=.4*Math.random()-.2,r.z=.4*Math.random()-.2,particleGeometry.vertices[e]=r}explosionPower=1.07,particles.visible=!0}function render(){renderer.render(scene,camera)}function onWindowResize(){sceneHeight=window.innerHeight,sceneWidth=window.innerWidth,renderer.setSize(sceneWidth,sceneHeight),camera.aspect=sceneWidth/sceneHeight,camera.updateProjectionMatrix()}$(document).keydown(function(e){if(e.keyCode in map){map[e.keyCode]=!0;var r=!0;if(map[37]&&map[38])if(currentLane==middleLane){if(currentLane=leftLane,heroSphere.position.y>2.5)return;bounceValue=.1,jumping=!0,r=!1}else if(currentLane==rightLane){if(currentLane=middleLane,heroSphere.position.y>2.5)return;bounceValue=.1,jumping=!0,r=!1}else r=!1;else if(map[39]&&map[38])if(currentLane==middleLane){if(currentLane=rightLane,heroSphere.position.y>2.5)return;bounceValue=.1,jumping=!0,r=!1}else if(currentLane==leftLane){if(currentLane=middleLane,heroSphere.position.y>2.5)return;bounceValue=.1,jumping=!0,r=!1}else r=!1;else if(map[37])currentLane==middleLane?currentLane=leftLane:currentLane==rightLane?currentLane=middleLane:r=!1;else if(map[39])currentLane==middleLane?currentLane=rightLane:currentLane==leftLane?currentLane=middleLane:r=!1;else{if(heroSphere.position.y>2.5)return;map[38]&&(bounceValue=.1,jumping=!0),r=!1}r&&(jumping=!0,bounceValue=.06)}}).keyup(function(e){e.keyCode in map&&(map[e.keyCode]=!1)});</script></body></html>